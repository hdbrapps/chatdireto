<!DOCTYPE html>
<html>
<head>
	<title>Vn Chat - app</title>
	<meta name="description" content="Chat direto - WhatsApp">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
	<link rel="stylesheet" href="style.css">
	<link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/9995/9995793.png" type="image/x-icon">
</head>
<body>
	<h1>
		<i class="fab fa-whatsapp"></i>
		Vn Chat
	</h1>	  
	<div class="form">
		<form onsubmit="event.preventDefault(); openWhatsApp();" id="whatsappForm">
			<label for="phone">Digite seu zap:</label>
			<input type="tel" id="phone" name="text" placeholder="" required>
			<button type="submit" id="whatsappButton">Abrir Chat</button>
		</form>			
	</div>
	
	<script>
		const phoneInput = document.querySelector('#phone');

		// Adiciona um ouvinte de eventos para o evento "paste"
		phoneInput.addEventListener('paste', (event) => {
			// Obtém o número colado
			const clipboardData = event.clipboardData || window.clipboardData;
			const pastedData = clipboardData.getData('text');
			
			// Remove tudo exceto dígitos
			let phoneNumber = pastedData.replace(/\D/g, '');
			
			// Aplica a formatação desejada
			if (phoneNumber.length === 11) {
				phoneNumber = phoneNumber.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
			} else {
				phoneNumber = phoneNumber.replace(/(\d{2})(\d{4,5})(\d{4})/, '($1) $2-$3');
			}
			
			// Atualiza o valor do campo de entrada com o número de telefone formatado
			phoneInput.value = phoneNumber;
		});

		function openWhatsApp() {
			const phoneNumber = phoneInput.value.replace(/\D/g, '');
			const whatsappLink = `https://wa.me/${phoneNumber}`;
			if (!phoneNumber) {
				phoneInput.setCustomValidity('Campo obrigatório');
				phoneInput.reportValidity();
			} else {
				phoneInput.setCustomValidity('');
				window.open(whatsappLink, '');
			}
		}
	</script>
</body>
</html>
