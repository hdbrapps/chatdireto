<!DOCTYPE html>
<html>
<head>
	<title>Vn Chat - app</title>
	<meta name="description" content="Chat direto - WhatsApp">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
	<link rel="stylesheet" href="style.css">
	<link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/9995/9995793.png" type="image/x-icon">
	<style>
		.modal {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 300px;
			padding: 20px;
			background-color: #f5f5f5;
			border: 1px solid #ccc;
			text-align: center;
			z-index: 9999;
		}

		.modal__close {
			position: absolute;
			top: 5px;
			right: 5px;
			font-size: 12px;
			cursor: pointer;
		}
	</style>
</head>
<body>
	<h1>
		<i class="fab fa-whatsapp"></i>
		Chat Vn
	</h1>	  
	<div class="form">
		<form onsubmit="event.preventDefault(); openWhatsApp();" id="whatsappForm">
			<label for="phone">Digite seu zap:</label>
			<input type="tel" id="phone" name="text" placeholder="" required>
			<button type="submit" id="whatsappButton">Abrir Chat</button>
		</form>			
	</div>

	<div class="modal" id="modal">
		<p>Site desenvolvido por VN Code</p>
		<span class="modal__close" onclick="closeModal()">&times;</span>
	</div>
	
	<script>
		const phoneInput = document.querySelector('#phone');
		const modal = document.getElementById('modal');

		phoneInput.addEventListener('paste', (event) => {
			setTimeout(() => {
				const phoneNumber = phoneInput.value.replace(/\D/g, '');
				const whatsappLink = `https://wa.me/${phoneNumber}`;
				if (!phoneNumber) {
					phoneInput.setCustomValidity('Campo obrigatório');
					phoneInput.reportValidity();
				} else {
					phoneInput.setCustomValidity('');
					window.open(whatsappLink, '');
					openModal();
				}
			}, 100);
		});

		function openWhatsApp() {
			const phoneNumber = phoneInput.value.replace(/\D/g, '');
			const whatsappLink = `https://wa.me/${phoneNumber}`;
			if (!phoneNumber) {
				phoneInput.setCustomValidity('Campo obrigatório');
				phoneInput.reportValidity();
			} else {
				phoneInput.setCustomValidity('');
				window.open(whatsappLink, '');
				openModal();
			}
		}

		function openModal() {
			modal.style.display = 'block';
		}

		function closeModal() {
			modal.style.display = 'none';
		}
	</script>
</body>
</html>
